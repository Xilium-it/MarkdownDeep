// MarkdownDeep - http://www.toptensoftware.com/markdowndeep
// Copyright (C) 2010-2011 Topten Software
// Minified by MiniME from toptensoftware.com
var MarkdownDeepEditorUI=new(function(){this.HelpHtmlWritten=false;var j=$(document);this.HelpHtml=function(b){var a="";
a+='<div class="mdd_modal" id="mdd_syntax_container" style="display:none">\n';a+='<div class="mdd_modal_frame">\n';a+=
'<div class="mdd_modal_button">\n';a+='<a href="'+b+'" id="mdd_help_location" style="display:none"></a>\n';a+=
'<a href="#" id="mdd_close_help">Close</a>\n';a+="</div>\n";a+='<div class="mdd_modal_content">\n';a+=
'<div class="mdd_syntax" id="mdd_syntax">\n';a+='<div class="mdd_ajax_loader"></div>\n';a+="</div>\n";a+="</div>\n";a+=
"</div>\n";a+="</div>\n";return a};this.ToolbarHtml=function(){var a="";a+='<div class="mdd_links">\n';a+=
'<a href="#" class="mdd_showpreview aHide" tabindex=-1>Show preview</a>\n';a+=
'<a href="#" class="mdd_help" tabindex=-1>How to Format</a>\n';a+="</div>\n";a+="<ul>\n";a+=
'<li><a href="#" class="mdd_button" id="mdd_undo" title="Undo (Ctrl+Z)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_redo" title="Redo (Ctrl+Y)" tabindex=-1></a></li>\n';a+=
'<li><span class="mdd_sep"></span></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_heading" title="Change Heading Style (Ctrl+H, or Ctrl+0 to Ctrl+6)" tabindex=-1></a></li>\n'
;a+=
'<li><a href="#" class="mdd_button" id="mdd_code" title="Preformatted Code (Ctrl+K or Tab/Shift+Tab on multiline selection)" tabindex=-1></a></li>\n'
;a+='<li><span class="mdd_sep"></span></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_bold" title="Bold (Ctrl+B)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_italic" title="Italic (Ctrl+I)" tabindex=-1></a></li>\n';a+=
'<li><span class="mdd_sep"></span></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_ullist" title="Bullets (Ctrl+U)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_ollist" title="Numbering (Ctrl+O)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_outdent" title="Unquote (Ctrl+W)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_indent" title="Quote (Ctrl+Q)" tabindex=-1></a></li>\n';a+=
'<li><span class="mdd_sep"></span></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_link" title="Insert Hyperlink (Ctrl+L)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_img" title="Insert Image (Ctrl+G)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_hr" title="Insert Horizontal Rule (Ctrl+R)" tabindex=-1></a></li>\n';a+=
"</ul>\n";a+='<div style="clear:both"></div>\n';return a};this.onResizerMouseDown=function(a){var h=window.event?a.
srcElement:a.target,f=$(h).closest(".mdd_resizer_wrap").prev(".mdd_editor_wrap").children("textarea")[0],m=a.clientY,i=$
(f).height();j.bind("mousemove.mdd",e).bind("mouseup.mdd",g);return false;function g(b){j.unbind("mousemove.mdd").unbind
("mouseup.mdd");return false}function e(c){var b=i+c.clientY-m;if(b<50)b=50;$(f).height(b);return false}};var l=0,k=
false;this.onShowHidePreview=function(h){var b=$(h.target),d=b.closest(".mdd_toolbar_wrap"),c=d.parent(),g=c.children(
".mdd_editor_wrap"),f=c.find(".mdd_resizer"),e=c.find(".mdd_preview"),i=b.data("method"),a=!b.hasClass("aOn");switch(i){
case"toggle":g.add(f).css({display:!a?"block":"none"});d.find("ul .mdd_button").toggleClass("aOff",a);break;case"show":
default:break}e.css({display:a?"block":"none"});b.toggleClass("aOn",a).toggleClass("aOff",!a)};this.onShowHelpPopup=
function(){$("#mdd_syntax_container").fadeIn("fast");$(".modal_content").scrollTop(l);j.bind("keydown.mdd",function(m){
if(m.keyCode==27){MarkdownDeepEditorUI.onCloseHelpPopup();return false}});if(!k){k=true;var a=$("#mdd_help_location").
attr("href");if(!a)a="mdd_help.htm";$("#mdd_syntax").load(a)}return false};this.onCloseHelpPopup=function(){l=$(
".modal_content").scrollTop();$("#mdd_syntax_container").fadeOut("fast");j.unbind("keydown.mdd").unbind("scroll.mdd");
return false};this.onToolbarButton=function(b){var a=$(b.target);if(a.hasClass("aOff"))return;var c=a.closest(
"div.mdd_toolbar_wrap").next(".mdd_editor_wrap").children("textarea").data("mdd");c.InvokeCommand(a.attr("id").substr(4)
);return false}})();(function(a){var p=a("body");a.fn.MarkdownDeep=function(g){var h={resizebar:true,toolbar:true,
help_location:"mdd_help.html"};if(g)a.extend(h,g);return this.each(function(){var s=a(this),e=s.parent(
".mdd_editor_wrap");if(e.length==0)e=s.wrap('<div class="mdd_editor_wrap" />').parent();var v=e.parent();if(h.toolbar){
var r=e.prev(".mdd_toolbar_wrap"),b=e.prev(".mdd_toolbar");if(r.length==0){if(b.length==0){b=a(
'<div class="mdd_toolbar" />');b.insertBefore(e)}r=b.wrap('<div class="mdd_toolbar_wrap" />').parent()}else if(b.length
==0){b=a('<div class="mdd_toolbar" />');r.html(b)}b.append(a(MarkdownDeepEditorUI.ToolbarHtml()));a("a.mdd_button",b).
click(MarkdownDeepEditorUI.onToolbarButton);a("a.mdd_showpreview",b).click(MarkdownDeepEditorUI.onShowHidePreview);a(
"a.mdd_help",b).click(MarkdownDeepEditorUI.onShowHelpPopup);if(!MarkdownDeepEditorUI.HelpHtmlWritten){var w=a(
MarkdownDeepEditorUI.HelpHtml(h.help_location));w.appendTo(p);a("#mdd_close_help").click(MarkdownDeepEditorUI.
onCloseHelpPopup);MarkdownDeepEditorUI.HelpHtmlWritten=true}}var d,f;if(h.resizebar){f=e.next(".mdd_resizer_wrap");d=f.
length==0?e.next(".mdd_resizer"):f.children(".mdd_resizer");if(f.length==0){if(d.length==0){d=a(
'<div class="mdd_resizer" />');d.insertAfter(e)}f=d.wrap('<div class="mdd_resizer_wrap" />').parent()}else if(d.length==
0){d=a('<div class="mdd_resizer" />');f.html(d)}f.bind("mousedown",MarkdownDeepEditorUI.onResizerMouseDown)}var u=a(this
).attr("data-mdd-preview"),c=null,t=null;if(u)c=a(u);if(!c||c.length==0)c=v.find(".mdd_preview");if(!c||c.length==0)c=a(
'<div class="mdd_preview"></div>').insertAfter(d?d:this);t=c[0];switch(h.shopwPreview){case"none":c.css({display:"none"}
);break;case"toolbar":c.css({display:"none"});a("a.mdd_showpreview",b).removeClass("aHide").addClass("aOff").data(
"method","toggle");break;case"show":default:a("a.mdd_showpreview",b).removeClass("aHide").addClass("aOn").data("method",
"show");break}var q=new MarkdownDeepEditor.Editor(this,t);if(g){a.extend(q.Markdown,g);a.extend(q,g)}q.onOptionsChanged(
);a(this).data("mdd",q)})}})(jQuery)